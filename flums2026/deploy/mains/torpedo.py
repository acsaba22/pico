import framebuf
import liblcd
import random
import time
import jobs
from blinkstatus import BlinkStatus
import timestats
from timestats import NewTimer
import asyncio

BOARD_WIDTH = 10
BOARD_HEIGHT = 10

class Square(object):

    FACE_EMPTY = 0
    FACE_SHIP = 1
    FACE_SHIP_HIT = 2
    FACE_SHIP_SUNK = 3
    FACE_EMPTY_HIT = 4

    FACES = {
      FACE_EMPTY: bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'),
      FACE_SHIP: bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'),
      FACE_SHIP_HIT: bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'),
      FACE_SHIP_SUNK: bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef\xff\xff\x00\x00\x00\x00\xff\xff{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef\xff\xff\x00\x00\x00\x00\xff\xff{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\xff\xff\x00\x00\x00\x00\xff\xff{\xef{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef{\xef\xff\xff\x00\x00\x00\x00\xff\xff{\xef{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef{\xef\xff\xff\x00\x00\x00\x00\xff\xff{\xef{\xef{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef{\xef{\xef\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff{\xef{\xef{\xef\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d\x05\x1d{\xef{\xef{\xef\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'),
      FACE_EMPTY_HIT: bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xe8\xe4\xe8\xe4\xe8\xe4\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'),
    }
    FB_MAYBE = bytearray(b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\x00\x00\x00\x00\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\xc6\x18\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00')

    WIDTH, HEIGHT = 30, 30

    def __init__(self, lcd, x, y):
        self.x, self.y = x, y
        x1, y1 = x*Square.WIDTH+10, y*Square.HEIGHT+10
        x2, y2 = x1+Square.WIDTH-1, y1+Square.HEIGHT-1
        self.lcd = lcd
        self._sprite_box = liblcd.Box(x1, x2, y1, y2)
        self._touch_area = liblcd.Box(x1+2, x2+2, y1-2, y2-2)
        self.setFace(Square.FACE_EMPTY)

    def setFace(self, face):
        self.face = face
        self.lcd.ShowBufferAtBox(
            self._sprite_box,
            Square.FACES[self.face])

    def isHit(self):
        return self.face in (Square.FACE_SHIP_HIT, Square.FACE_EMPTY_HIT, Square.FACE_SHIP_SUNK)

    def draw(self):
        self.setFace(self.face)

    def setMaybe(self, maybe):
        if maybe:
            buf = Square.FACES[self.face][:]
            fb = framebuf.FrameBuffer(buf, Square.WIDTH, Square.HEIGHT, framebuf.RGB565)
            fb_maybe = framebuf.FrameBuffer(Square.FB_MAYBE, Square.WIDTH, Square.HEIGHT, framebuf.RGB565)
            fb.blit(fb_maybe, 0, 0, 0xffff)
            self.lcd.ShowBufferAtBox(
                self._sprite_box,
                buf)
        else:
            self.lcd.ShowBufferAtBox(
                self._sprite_box,
                Square.FACES[self.face])

    def isTouch(self, touch):
        return touch in self._touch_area


class Ship(object):
    def __init__(self, size, x, y, is_horizontal):
        self.size = size
        self.x = x
        self.y = y
        self.is_horizontal = is_horizontal
        self.lives = size

    def getCoords(self):
        if self.is_horizontal:
            return [(self.x+i,self.y) for i in range(self.size)]
        else:
            return [(self.x,self.y+i) for i in range(self.size)]

    def isAlive(self):
        return self.lives>0

    def lifeLost(self):
        self.lives -= 1

    @staticmethod
    def GetRandomShip(size):
        is_horizontal = random.choice([True, False])
        if is_horizontal:
            x = random.randint(0, BOARD_WIDTH-size)
            y = random.randint(0, BOARD_HEIGHT-1)
        else:
            x = random.randint(0, BOARD_WIDTH-1)
            y = random.randint(0, BOARD_HEIGHT-size)
        return Ship(size, x, y, is_horizontal)

    @staticmethod
    def CheckTooClose(old_ship, new_ship):
        old_coords = set(old_ship.getCoords())
        new_coords = set(new_ship.getCoords())
        for x, y in old_coords:
            for dx in range(-1, 2):
                for dy in range(-1, 2):
                    if (x+dx, y+dy) in new_coords:
                        return True
        return False

    @staticmethod
    def randomizeShips(ship_sizes = [2,2,3,3,4,5]):
        valid_layout = False
        while not valid_layout:
            ships = []
            valid_layout = True
            for size in ship_sizes:
                new_ship = Ship.GetRandomShip(size)
                too_close = False
                for old_ship in ships:
                    if Ship.CheckTooClose(old_ship, new_ship):
                        too_close = True
                        break
                if too_close:
                    valid_layout = False
                    break
                ships.append(new_ship)
        if valid_layout:
            return ships
        return None

class ShotResult(object):
    def __init__(self, x, y, valid, is_hit, is_sunk):
        self.x = x
        self.y = y
        self.valid = valid
        self.is_hit = is_hit
        self.is_sunk = is_sunk or set()

    def __repr__(self):
        return f"({self.x},{self.y}) valid={self.valid} hit={self.is_hit} sunk={self.is_sunk}"

class Board(object):
    def __init__(self, lcd, text):
        self.board = [[Square(lcd, x, y) for x in range(BOARD_WIDTH)] for y in range(BOARD_HEIGHT)]
        self.lcd = lcd
        self.text = text

    def placeShip(self, ship):
        for x, y in ship.getCoords():
            self.board[y][x].setFace(Square.FACE_SHIP)

    def hasShip(self, x, y):
        for ship in self.ships:
            if (x,y) in ship.getCoords():
                return True
        return False

    def getSquare(self, x, y):
        return self.board[y][x]

    def applyShotResult(self, shot_result):
        if shot_result.valid:
            square = self.getSquare(shot_result.x, shot_result.y)
            if shot_result.is_hit:
                square.setFace(Square.FACE_SHIP_HIT)
            else:
                square.setFace(Square.FACE_EMPTY_HIT)
            for (x,y) in shot_result.is_sunk:
                self.board[y][x].setFace(Square.FACE_SHIP_SUNK)

    def shot(self, x, y):
        found_ship = False
        valid_hit = False
        is_hit = False
        is_sunk = set()
        for ship in self.ships:
            if (x,y) in ship.getCoords():
                square = self.board[y][x]
                found_ship = True
                is_hit = True
                if not square.isHit():
                    valid_hit = True
                    ship.lifeLost()
                    if ship.isAlive():
                        square.setFace(Square.FACE_SHIP_HIT)
                    else:
                        for x, y in ship.getCoords():
                            self.board[y][x].setFace(Square.FACE_SHIP_SUNK)
                if not ship.isAlive():
                    is_sunk = ship.getCoords()
        if not found_ship:
            square = self.board[y][x]
            if not square.isHit():
                square.setFace(Square.FACE_EMPTY_HIT)
                valid_hit = True
        shot_result = ShotResult(x, y, valid_hit, is_hit, is_sunk)
        return shot_result

    # Returns the clicked Square after click, otherwise None
    def checkTouch(self, touch_point):
        if touch_point:
            touch_coord = liblcd.Coord(touch_point[0], touch_point[1])
            found = False
            for row in self.board:
                for square in row:
                    if square.isTouch(touch_coord):
                        return (square.x, square.y)
        return None

    def showLabel(self):
        LABEL_WIDTH = 100
        LABEL_HEIGHT = 30
        LABEL_X = 340
        LABEL_Y = 40
        EXPECTED_FB_SIZE = liblcd.getImageBytesize(LABEL_WIDTH, LABEL_HEIGHT)

        buf = bytearray(EXPECTED_FB_SIZE)
        left = (LABEL_WIDTH - 8*len(self.text)) // 2
        top = LABEL_HEIGHT // 2
        fb = framebuf.FrameBuffer(buf, LABEL_WIDTH, LABEL_HEIGHT, framebuf.RGB565)
        fb.fill(liblcd.WHITE)
        fb.text(self.text, left, top, liblcd.BLACK)
        self.lcd.ShowBufferAtBox(
                liblcd.Box(LABEL_X, LABEL_X+LABEL_WIDTH-1, LABEL_Y, LABEL_Y+LABEL_HEIGHT-1),
                buf)

    def show(self):
        for row in self.board:
            for square in row:
                square.draw()
        self.showLabel()

class Player(object):
    def __init__(self, self_board):
        self.board = self_board
        self.ships = set()
        self.hits = set()

    def shot(self, x, y):
        is_hit = False
        is_sunk = set()
        valid = (x,y) not in self.hits
        if valid:
            self.hits.add((x,y))
            for ship in self.ships:
                if (x,y) in ship.getCoords():
                    is_hit = True
                    ship.lifeLost()
                    if not ship.isAlive():
                        is_sunk = ship.getCoords()
        return ShotResult(x, y, valid, is_hit, is_sunk)

    def applyShotResult(self, shot_result):
        self.board.applyShotResult(shot_result)

    def myStep(self, touch):
        assert False, "unimplemented"

    def show(self):
        self.board.show()


class Human(Player):
    def __init__(self, lcd):
        Player.__init__(self, Board(lcd, "Self"))
        self.ships = Ship.randomizeShips()
        for ship in self.ships:
            self.board.placeShip(ship)
        self.last_touched = None

    def myStep(self, touch, visible_board):
        t = touch.get()
        if not t and self.last_touched:
            # Released, last_touched is the clicked
            last_x, last_y = self.last_touched
            last_square = visible_board.getSquare(last_x, last_y)
            last_square.setMaybe(False)
            self.last_touched = None
            return (last_x, last_y)
        clicked = None
        if t:
            clicked = visible_board.checkTouch(t)
        if clicked == self.last_touched:
            # No change
            return None
        if self.last_touched:
            # Change, invalidate last_touched, it'll be reset later
            last_x, last_y = self.last_touched
            last_square = visible_board.getSquare(last_x, last_y)
            last_square.setMaybe(False)
            self.last_touched = None
        if clicked:
            self.last_touched = clicked
            last_x, last_y = self.last_touched
            last_square = visible_board.getSquare(last_x, last_y)
            last_square.setMaybe(True)
        return None

class AIOpponent(Player):
    def __init__(self, lcd):
        Player.__init__(self, Board(lcd, "Computer"))
        self.ships = Ship.randomizeShips()

    def myStep(self, touch, visible_board):
        time.sleep(1)
        x = random.randint(0, BOARD_WIDTH-1)
        y = random.randint(0, BOARD_HEIGHT-1)
        square = visible_board.getSquare(x, y)
        square.setMaybe(True)
        time.sleep(1)
        square.setMaybe(False)
        touch.do()
        return (x,y)

<<<<<<< HEAD

class NetworkLocalPlayer(Player):
    def __init__(self, lcd):
        Player.__init__(self, Board(lcd, "Self"))
        self.ships = Ship.randomizeShips()
        for ship in self.ships:
            self.board.placeShip(ship)
        self.last_touched = None

    def myStep(self, touch, visible_board):
        t = touch.get()
        if not t and self.last_touched:
            # Released, last_touched is the clicked
            last_x, last_y = self.last_touched
            last_square = visible_board.getSquare(last_x, last_y)
            last_square.setMaybe(False)
            self.last_touched = None
            # Send (last_x, last_y, False)
            return (last_x, last_y)
        clicked = None
        if t:
            clicked = visible_board.checkTouch(t)
        if clicked == self.last_touched:
            # No change
            return None
        if self.last_touched:
            # Change, invalidate last_touched, it'll be reset later
            last_x, last_y = self.last_touched
            last_square = visible_board.getSquare(last_x, last_y)
            last_square.setMaybe(False)
            self.last_touched = None
        if clicked:
            self.last_touched = clicked
            x, y = clicked
            last_square = visible_board.getSquare(x, y)
            last_square.setMaybe(True)
            # Send (x, y, True)
        return None

class NetworkRemoteOpponent(Player):
    def __init__(self, lcd):
        Player.__init__(self, Board(lcd, "Remote"))
        self.last_maybe = None

    def shot(self, x, y):
        # Send (x,y)
        # Receive: ShotResult object
        return ShotResult(x, y, valid, is_hit, is_sunk)

    def applyShotResult(self, shot_result):
        # Send (shot_result)
        Player.applyShotResult(shot_result)

    def myStep(self, touch, visible_board):
        # Receive (x,y,is_final) or None
        if not recv:
            return None
        x, y, is_final = recv
        if self.last_maybe:
            last_x, last_y = self.last_maybe
            square = visible_board.getSquare(last_x, last_y)
            square.setMaybe(False)
            self.last_maybe = None
        if not is_final:
            if 0<=x<BOARD_WIDTH and 0<=y<BOARD_HEIGTH:
                square = visible_board.getSquare(x, y)
                square.setMaybe(True)
                self.last_maybe = (x,y)
            return None
        return (x,y)

initTimer = NewTimer("main.Init")

async def mainTorpedo():
    with initTimer:
        screen = liblcd.LCD_3inch5()
        screen.BackLight(10)
        screen.Clear()
        touch = liblcd.SmartTouch(screen)
        last_maybe_square = None

        player = Human(screen)
        opponent = AIOpponent(screen)

        players = [opponent, player]

        players[-1].show()

    while True:
        await asyncio.sleep_ms(0)
        clicked = players[0].myStep(touch, players[-1].board)
        if clicked:
            x, y = clicked
            shot_result = players[-1].shot(x, y)
            print (shot_result)
            players[-1].applyShotResult(shot_result)
            if shot_result.valid:
                await asyncio.sleep(1)
                players = [players[1], players[0]]
                players[-1].show()

async def main():
    jobs.start(BlinkStatus().run())
    # jobs.start(timestats.stats.run())
    jobs.start(mainTorpedo())
    await jobs.STOP.wait()


if __name__ == '__main__':
    jobs.runMain(main())
